<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>我的梦 · Dream Earth</title>

  <style>
    body {
      margin: 0;
      padding: 40px;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #111;
      color: #ddd;
    }

    h1 {
      font-size: 24px;
      margin-bottom: 30px;
      font-weight: normal;
    }

    .dream {
      padding: 16px 0;
      border-bottom: 1px solid #222;
      cursor: pointer;
    }

    .dream:hover {
      background: rgba(255,255,255,0.03);
    }

    .date {
      font-size: 12px;
      color: #888;
      margin-bottom: 6px;
    }

    .line {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: #666;
      flex-shrink: 0;
    }

    .text {
      font-size: 14px;
      line-height: 1.4;
    }
  </style>
</head>

<body>

  <h1>我的梦</h1>

  <!-- 梦列表（之后我们会自动生成） -->


<div id="dreamList"></div>

 <script>
  const dreams = JSON.parse(localStorage.getItem('dreams') || '[]');
  const container = document.getElementById('dreamList');
  
  dreams.sort((a, b) => {
  return b.createdAt - a.createdAt;
});

  

  if (dreams.length === 0) {
    container.innerHTML = '<p style="color:#666">这里还没有梦。</p>';
  }

  dreams.forEach(dream => {
    const div = document.createElement('div');
    div.className = 'dream';

    div.onclick = function () {
      if (dream.location && dream.location.length === 2) {
  const lat = dream.location[0];
  const lng = dream.location[1];
  location.href = `index.html?lat=${lat}&lng=${lng}`;
}

    };

    div.innerHTML = `
      <div class="date">${dream.date}</div>
      <div class="line">
        <div class="dot" style="background:${getColor(dream.emotion)}"></div>
        <div class="text">${dream.text}</div>
      </div>
    `;

    container.appendChild(div);
  });

  function getColor(emotion) {
    const colors = {
      calm: "#9AA5B1",
      bright: "#E6C97A",
      heavy: "#5A6B7A",
      confused: "#8C8C8C",
      fear: "#3A1F1F",
      forgotten: "#CCCCCC"
    };
    return colors[emotion] || "#666";
  }
</script>
 

</body>
</html>
